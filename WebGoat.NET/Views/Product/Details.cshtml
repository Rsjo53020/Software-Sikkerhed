@model ProductDetailsViewModel

@{
    ViewData["Title"] = "Product details";
}

@await Html.PartialAsync("_StatusMessage")

<div>
    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-danger">
            @Model.ErrorMessage
        </div>
    }
    else if (Model.Product == null)
    {
        <div class="alert alert-danger">
            Product not found.
        </div>
    }
    else
    {
        <div class="productDetail">
            <img src="@Model.ProductImageUrl" alt="@Model.Product.ProductName" class="product-image" />

            <br />

            <strong>@Model.Product.ProductName</strong>
            <br />
            Category: @(Model.Product.Category?.CategoryName ?? "No category")
            <br />
            Unit: @Model.Product.QuantityPerUnit
            <br />
            Price: @Model.Product.DecimalUnitPrice
        </div>

        @if (Model.CanAddToCart)
        {
            <form asp-controller="Cart" asp-action="AddOrder" asp-route-productId="@Model.Product.ProductId" method="post"
                class="mt-3">
                @Html.AntiForgeryToken()

                <div class="form-group">
                    <label asp-for="Quantity">Quantity:</label>
                    <input asp-for="Quantity" type="number" min="1" class="form-control"
                        style="width: 100px; display: inline-block;" />
                    <span asp-validation-for="Quantity" class="text-danger"></span>
                </div>

                <button type="submit" class="btn btn-primary mt-2">
                    Add to cart
                </button>
            </form>
        }
        else
        {
            <div class="alert alert-warning mt-3">
                This product cannot be added to the cart.
            </div>
        }
    }
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}